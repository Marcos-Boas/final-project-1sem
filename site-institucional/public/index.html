<!DOCTYPE html>
<html lang="pt-br">

<head>
    <script src="./js/funcoes.js"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="./js/funcoes.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet" />
    <link rel="shortcut icon" href="assets/imgs/logoPagina.png" type="image/x-icon" />
    <link rel="stylesheet" href="css/style.css" />
    <title>MS | Home</title>
</head>

<body onload="validarSessao(), sortearimg(), trocarExemplo(), relacaoSkins()">
    <img src="./assets/imgs/surgindo.png" alt="" class="surgindo" />
    <!-- COMEÇO MENU LATERAL -->
    <div class="menuLateral">
        <img src="assets/imgs/logoProjeto.png" alt="Logo Markléber Skins" />

        <span class="apresentacaoCliente">Olá <span id="b_usuario">visitante</span>, Bem vindo(a)!</span>

        <ul class="listaMenuLateral">
            <li class="linkAtivo"><a href="#motivo">| Home</a></li>
            <ul class="subMenu">
                <li class="subItems"><a href="#definicao">| Definição</a></li>
                <li class="subItems"><a href="#exemplos">| Exemplos</a></li>
                <li class="subItems">
                    <a href="#mundoFinanceiro">| Dados Monetários</a>
                </li>
                <li class="subItems"><a href="#escolhaSua">| Escolha a sua</a></li>
                <li class="subItems"><a href="#curiosidades">| Curiosidades</a></li>
            </ul>
            <li class="subItems" id="infoPessoal">
                <a href="infoPessoal.html">| Informações pessoais</a>
            </li>
            <li class="subItems" id="login"><a href="login.html">| Entrar</a></li>
            <li class="subItems" id="cadastro">
                <a href="cadastro.html">| Cadastro</a>
            </li>
            <li class="subItems" id="sair">
                <a href="login.html" onclick="limparSessao()">| Sair</a>
            </li>
        </ul>

        <div class="rodape">
            <img src="assets/imgs/facebook.png" alt="Logo do facebook" />
            <img src="assets/imgs/instagram.png" alt="Logo do instagram" />
            <img src="assets/imgs/twitter.png" alt="Logo do twitter" />
        </div>
        <span class="copyright">&copy; Marcos Henrique - SPTech / ADS</span>
    </div>

    <!-- FINAL MENU LATERAL -->

    <div class="corpo">
        <!-- CARD 1 -->
        <div class="card imagemCard1" id="motivo">
            <div class="opaca">
                <div class="texto">
                    <div class="tituloCard corBranca">POR QUE SKINS?</div>

                    <div class="textoCard corBranca">
                        Skins não são apenas aparências diferentes para personagens em
                        jogos online, elas causam diversos sentimentos em quem as usam.
                        Desde sensação de poder, coragem entre outros... <br /><br />

                        Iremos falar mais sobre isso logo abaixo!
                    </div>
                </div>

                <div class="skinCarrosel" id="skinCarrosel"></div>
            </div>
        </div>
        <!-- FIM CARD 1 -->

        <!-- CARD 2 -->
        <div class="card segundaCor" id="definicao">
            <div class="tituloCard corRoxa">Mas o que seria uma Skin?</div>

            <div class="textoCard corRoxa">
                Skin ou “Pele“, é um visual alternativo dado a um programa
                computacional, são recursos que modificam comumente somente o visual
                dos personagens, mas também pode alterar os cenários e demais
                elementos que o jogo possua.
            </div>
            <div class="imgApresentacao"></div>
        </div>
        <!-- FIM CARD 2 -->

        <!-- CARD 3 -->
        <div class="card primeiraCor" id="exemplos">
            <div class="tituloCard corBranca">Mais Exemplos</div>

            <div class="textoCard corBranca" id="textoExemplos"></div>

            <div class="imgExemplos" id="imgExemplos"></div>
        </div>
        <!-- FIM CARD 3 -->

        <!-- CARD 4 -->
        <div class="card imagemCardFinanceiro" id="mundoFinanceiro">
            <div class="opacaCardFinanceiro">
                <div class="alinhamentoCorpo">
                    <div class="tituloCard corBranca">Mundo financeiro</div>

                    <hr />

                    <div class="textoCard corBranca">
                        Segundo o site da globo, apenas o League of Legends arrecadou mais
                        de R$37 milhões para a caridade com a venda de somente uma skin
                        (Ornn sabugueiro). Além de ajudar as instituições e as pessoas que
                        precisam desse dinheiro, também satisfez os usuários que a
                        compraram e consequentemente agregou valor ao jogo e a empresa
                        (Riot). Segue uma relação com o faturamento desse e outros jogos
                        no mercado de skins:
                    </div>
                </div>
            </div>
        </div>
        <!-- FIM CARD 4 -->

        <!-- CARD 5 -->
        <div class="cardGrafico" id="tabelaFinanceira">
            <div class="tituloCard corRoxa">
                Venda de skins dos principais jogos
            </div>
            <div class="myChartJs">
                <canvas id="myChart"></canvas>
            </div>
        </div>
        <!-- FIM CARD 5 -->

        <!-- CARD 6 -->
        <div class="card2 primeiraCor" id="escolhaSua">
            <div class="corpoEscolha">

                <div class="tituloCard corBranca">Escolha a sua favorita</div>
                <div class="div_selects">
                    <div class="escolhaDeSkin" id="escolhaJogo"></div>
                    <div class="escolhaDeSkin" id="escolhaPersonagem"></div>
                    <div class="escolhaDeSkin" id="escolhaSkin"></div>
                </div>
                <!-- <div class="escolhaDeSkin" id="imgSkinEscolhida"></div> -->
                <button onclick="verificarSkin()">Selecionar skin favorita</button>
            </div>
            <div class="imgSkinEscolhida" id="imgSkinEscolhida"></div>
            
        </div>
        <!-- FIM CARD 6 -->

        <!-- KPI CARD 7 -->
        <div class="card2 segundaCor" id="curiosidades">
            
            <div class="kpi1">
                <div class="tituloCard corRoxa">Skin mais favoritada</div>
                <span class="textoCard corRoxa" id="nomeSkin"></span>
                <div class="imgKpi1" id="imgKpi1"></div>
            </div>       
            <div class="kpi2">
                <div class="tituloCard corRoxa">Skin menos favoritada</div>
                <span class="textoCard corRoxa" id="nomeSkin2"></span>
                <div class="imgKpi2" id="imgKpi2"></div>
            </div>       
            
        </div>
        <!-- FIM KPI CARD 7-->

    </div>
</body>

</html>

<script>

    function verificarSkin(){
        if(sessionStorage.SKIN_FAVORITA == null || sessionStorage.SKIN_FAVORITA == undefined){
            alert('Faça login primeiro!')
            window.location = 'login.html'
        }else{
            editar()
        }
    }
</script>

<!-- CHART JS -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    const ctx = document.getElementById("myChart");

    new Chart(ctx, {
        type: "bar",
        data: {
            labels: [
                "Counter Strike: Global offensive",
                "League of Legends",
                "Valorant",
                "Free fire",
                "Fortnite",
            ],
            datasets: [
                {
                    label: "Faturamento (em bilhões)",
                    data: [10, 1.75, 1, 20, 2.8],
                    borderWidth: 1,
                    borderColor: "#00f",
                    backgroundColor: "#554e9a",
                },
            ],
        },
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                },
            },
        },
    });
</script>
<!-- FIM CHART JS -->

<!-- ROTAÇÃO DAS IMAGENS -->
<script>
    if (
        sessionStorage.NOME_USUARIO != null ||
        sessionStorage.NOME_USUARIO != undefined
    ) {
        document.getElementById("login").style.display = "none";
        document.getElementById("cadastro").style.display = "none";
        document.getElementById("infoPessoal").style.display = "block";
        document.getElementById("sair").style.display = "block";
    } else {
        document.getElementById("login").style.display = "block";
        document.getElementById("cadastro").style.display = "block";
        document.getElementById("infoPessoal").style.display = "none";
        document.getElementById("sair").style.display = "none";
    }
</script>
<!-- FIM ROTAÇÃO DAS IMAGENS -->


<!-- ORGANIZARDOR DE IMAGENS -->
<script src="js/organizarImgs.js"></script>
<!-- FIM ORGANIZARDOR DE IMAGENS -->

<!-- CRIAÇÃO DA LISTA DE ESCOLHA DE SKINS -->
<script src="js/skins.js"></script>
<!-- FIM CRIAÇÃO DA LISTA DE ESCOLHA DE SKINS -->

<script>

function relacaoSkins() {
        //aguardar();
        fetch("/usuarios/listar").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    var feed = document.getElementById("feed_container");
                    var mensagem = document.createElement("span");
                    mensagem.innerHTML = "Nenhum resultado encontrado."
                    feed.appendChild(mensagem);
                    throw "Nenhum resultado encontrado!!";
                }



                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));
                    var maiorVotacao = resposta[0]
                    var menorVotacao = resposta[0]
                    
                    // Math.min(resposta.count(caminhoImg)).caminhoImg
                    
                    for (let index = 0; index < resposta.length; index++) {
                        
                        if(resposta[index].votos > maiorVotacao.votos)
                        maiorVotacao = resposta[index]
                        
                        if(resposta[index].votos < menorVotacao.votos)
                        menorVotacao = resposta[index]
                        
                    }


                    nomeSkin.innerHTML = `${maiorVotacao.nomePersonagem}: ${maiorVotacao.nomeSkin}`
                    imgKpi1.style.backgroundImage = `url(${maiorVotacao.caminhoImg})`

                    nomeSkin2.innerHTML = `${menorVotacao.nomePersonagem}: ${menorVotacao.nomeSkin}`
                    imgKpi2.style.backgroundImage = `url(${menorVotacao.caminhoImg})`


                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);
            
        });
    }


</script>